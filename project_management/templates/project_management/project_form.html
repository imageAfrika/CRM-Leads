{% extends 'project_management/base.html' %}
{% load static %}

{% block title %}{% if form.instance.id %}Edit{% else %}Create{% endif %} Project{% endblock %}

{% block header_title %}{% if form.instance.id %}Edit Project{% else %}Create Project{% endif %}{% endblock %}

{% block extra_css %}
<link href="{% static 'css/project_management.css' %}" rel="stylesheet">
<link href="{% static 'css/project_form.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}

<section class="form-container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-grid">
            <section class="form-section">
                <h2>Basic Information</h2>
                
                <div class="form-field">
                    <label for="{{ form.name.id_for_label }}">Project Name<span class="required">*</span></label>
                    {{ form.name }}
                    {% if form.name.errors %}
                        <div class="error-message">{{ form.name.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="form-field">
                    <label for="{{ form.code.id_for_label }}">Project Code<span class="required">*</span></label>
                    {{ form.code }}
                    {% if form.code.errors %}
                        <div class="error-message">{{ form.code.errors }}</div>
                    {% endif %}
                    <div class="help-text">Unique reference code for the project</div>
                </div>
                
                <div class="form-field">
                    <label for="{{ form.client.id_for_label }}">Client</label>
                    {{ form.client }}
                    {% if form.client.errors %}
                        <div class="error-message">{{ form.client.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="form-field">
                    <label for="{{ form.description.id_for_label }}">Description</label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="error-message">{{ form.description.errors }}</div>
                    {% endif %}
                </div>
                </section>
            
            <section class="form-section">
                <h2>Project Details</h2>
                
                <div class="field-group">
                    <div class="form-field">
                        <label for="{{ form.start_date.id_for_label }}">Start Date<span class="required">*</span></label>
                        {{ form.start_date }}
                        {% if form.start_date.errors %}
                            <div class="error-message">{{ form.start_date.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-field">
                        <label for="{{ form.end_date.id_for_label }}">End Date</label>
                        {{ form.end_date }}
                        {% if form.end_date.errors %}
                            <div class="error-message">{{ form.end_date.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="field-group">
                    <div class="form-field">
                        <label for="{{ form.status.id_for_label }}">Status</label>
                        {{ form.status }}
                        {% if form.status.errors %}
                            <div class="error-message">{{ form.status.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-field">
                        <label for="{{ form.priority.id_for_label }}">Priority</label>
                        {{ form.priority }}
                        {% if form.priority.errors %}
                            <div class="error-message">{{ form.priority.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="{{ form.budget.id_for_label }}">Budget</label>
                    {{ form.budget }}
                    {% if form.budget.errors %}
                        <div class="error-message">{{ form.budget.errors }}</div>
                    {% endif %}
                </div>
            </section>
        </div>
        
        <div class="form-grid">
            <section class="form-section">
                <h2>Team</h2>
                
                <div class="form-field">
                    <label for="{{ form.manager.id_for_label }}">Project Manager</label>
                    {{ form.manager }}
                    {% if form.manager.errors %}
                        <div class="error-message">{{ form.manager.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="form-field">
                    <label for="{{ form.team_members.id_for_label }}">Team Members</label>
                    {{ form.team_members }}
                    {% if form.team_members.errors %}
                        <div class="error-message">{{ form.team_members.errors }}</div>
                    {% endif %}
                    <div class="help-text">Hold Ctrl/Cmd to select multiple team members</div>
                </div>
            </section>
            
            <section class="form-section">
                <h2>Additional Information</h2>
                
                <div class="form-field">
                    <label for="{{ form.tags.id_for_label }}">Tags</label>
                    {{ form.tags }}
                    {% if form.tags.errors %}
                        <div class="error-message">{{ form.tags.errors }}</div>
                    {% endif %}
                    <div class="help-text">Separate tags with commas</div>
                </div>
            </section>
        </div>
        
        <div class="form-actions">
            <a href="{% url 'project_management:project_list' %}" class="button secondary-outline">Cancel</a>
            <button type="submit" class="button primary">
                {% if form.instance.id %}Update Project{% else %}Create Project{% endif %}
            </button>
        </div>
    </form>
</section>
{% endblock %}